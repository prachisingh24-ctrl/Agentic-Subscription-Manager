<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agentic Subscription Manager</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- HEADER WITH USER INFO -->
  <header class="mainHeader">
    <div class="logoArea">ðŸ¤– Agentic Dashboard</div>

    <div class="userArea">
      <div class="userInfo">
        <div class="avatar" id="avatar"></div>
        <div>
          <div id="userName">User</div>
          <div id="userEmail" class="userEmail">email@email.com</div>
        </div>
      </div>
      <button class="logoutBtn" onclick="logout()">Logout</button>
    </div>
  </header>

  <h1>Agentic Subscription Manager Dashboard</h1>

  <!-- Tab buttons -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="decisions">Decisions</button>
    <button class="tab-btn" data-tab="transactions">History</button>
  </div>

  <!-- Decisions tab -->
  <div id="decisions" class="tab-content active">
    <div id="subscriptions"></div>
  </div>

  <!-- History tab -->
  <div id="transactions" class="tab-content">
    <!-- Filter bar -->
    <div id="filter-bar">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="cancel">Cancel</button>
      <button class="filter-btn" data-filter="switch">Switch</button>
      <button class="filter-btn" data-filter="keep">Keep</button>
    </div>
    <!-- Transaction history will load here -->
    <div id="transaction-list"></div>
  </div>

  <!-- Scripts -->
  <script src="app.js"></script>
  <script>
    // ===== CHECK LOGIN SESSION =====
    const email = localStorage.getItem("loggedInUser");

    if (!email) {
      window.location.replace("login.html");
    }

    const user = JSON.parse(localStorage.getItem("user_" + email));

    if (user) {
      document.getElementById("userName").innerText = user.name;
      document.getElementById("userEmail").innerText = user.email;
      document.getElementById("avatar").innerText =
        user.name.charAt(0).toUpperCase();
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      setTimeout(() => {
        window.location = "login.html";
      }, 100);
    }
  </script>
</body>
</html>